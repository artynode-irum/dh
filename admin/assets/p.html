<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">
    <link rel="stylesheet" href="assets/styles.css">
    <style>
        /* General Styles */
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
}

.main-section {
    display: flex;
    height: 100vh;
}

.first-section {
    width: 250px;
    background-color: #343a40;
    color: white;
    transition: width 0.3s;
}

.sidebar {
    display: flex;
    flex-direction: column;
}

.navbar-toggle {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    cursor: pointer;
}

.sidebar-logo {
    width: 100px;
    display: inline;
}

#sidebar {
    display: flex;
    flex-direction: column;
}

#sidebar a {
    color: white;
    text-decoration: none;
    padding: 10px 15px;
    display: flex;
    align-items: center;
}

#sidebar a:hover {
    background-color: #495057;
}

#sidebar a .side-bar-link {
    margin-left: 10px;
}

#sidebar .active {
    background-color: #007bff;
}

.second-section {
    flex: 1;
    padding: 20px;
}

.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #f8f9fa;
    padding: 10px;
}

.navbar-profile {
    border: none;
    background: transparent;
    cursor: pointer;
}

.dropdown-content {
    display: none;
    position: absolute;
    right: 10px;
    background-color: white;
    border: 1px solid #ddd;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    padding: 10px;
    z-index: 1000;
}

.dropdown-content.show {
    display: block;
}

.card {
    background: white;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

.card-header {
    padding: 15px;
    background: #007bff;
    color: white;
    font-size: 18px;
}

.card-footer {
    display: flex;
    justify-content: space-between;
    padding: 15px;
}

.card-footer-left {
    display: flex;
    align-items: center;
}

.profile-image {
    border-radius: 50%;
}

.button-class {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
}

.footer {
    background-color: #f8f9fa;
    text-align: center;
    padding: 10px;
}

    </style>
</head>
<body>
    <div class="main-section">
        <div class="first-section">
            <div class="sidebar" id="sidebar">
                <div class="navbar-toggle" id="sidebar-toggle">
                    <span><a href="#" id="sidebar-logo-link">
                        <img src="../assets/img/Doctor-Help-Logo.webp" class="sidebar-logo" alt="DoctorHelp"></a>
                    </span>
                    <span><i class="fa-solid fa-bars"></i></span>
                </div>
                <div>
                    <a href="index.php" id="home-link"><i class="fa-solid fa-square-poll-horizontal"></i><span class="side-bar-link">Dashboard</span></a>
                    <a href="telehealth.php" id="services-link"><i class="fa-solid fa-money-bill-wave"></i><span class="side-bar-link">Telehealth</span></a>
                    <a href="medical_certificate.php" id="services-link"><i class="fa-solid fa-certificate"></i><span class="side-bar-link">Medical Certificate</span></a>
                    <a href="prescription.php" id="services-link"><i class="fa-solid fa-file-medical"></i><span class="side-bar-link">Prescription</span></a>
                    <a href="referrals.php" id="services-link"><i class="fa-solid fa-paste"></i><span class="side-bar-link">Referrals</span></a>
                    <a href="add_user.php" id="services-link"><i class="fa-solid fa-hospital-user"></i><span class="side-bar-link">Add New User</span></a>
                    <a href="total_patient.php" id="services-link"><i class="fa-solid fa-hospital-user"></i><span class="side-bar-link">Patients</span></a>
                    <a href="total_doctor.php" id="services-link"><i class="fa-solid fa-user-nurse"></i><span class="side-bar-link">Doctors</span></a>
                    <a href="total_admin.php" id="services-link"><i class="fa-solid fa-user-tie"></i><span class="side-bar-link">Admins</span></a>
                    <a href="contact.php" id="services-link"><i class="fa-regular fa-calendar-days"></i><span class="side-bar-link">Contact</span></a>
                </div>
            </div>
        </div>
        <div class="second-section">
            <div class="navbar">
                <div class="page-title">
                    <span>Dashboard</span>
                </div>
                <div class="navbar-title">
                    <span onclick="toggleDropdown()">
                        <img src="assets/img/<?php echo $user['profile_picture']; ?>" alt="Profile Picture" class="navbar-img">
                        <button class="navbar-profile"><?php echo htmlspecialchars($username); ?></button>
                    </span>
                    <div class="dropdown-content" id="dropdownContent">
                        <div>
                            <img src="assets/img/<?php echo $user['profile_picture']; ?>" alt="Profile Picture" width="50">
                            <h5><?php echo $username; ?></h5>
                            <p><?php echo $user['email']; ?></p>
                            <hr>
                            <a href="profile.php">Profile</a>
                            <a href="../logout.php">Logout</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="dashboard-content-section">
                <div class="left-section">
                    <div class="card">
                        <div class="card-header">
                            <span style="font-size: 22px;">Welcome Back !</span>
                            <span style="font-size: 16px;">Dashboard</span>
                        </div>
                        <div class="card-footer">
                            <div class="card-footer-left">
                                <img class="profile-image" src="assets/img/<?php echo $user['profile_picture']; ?>" alt="Profile Picture" width="100">
                                <h3><b><?php echo $username; ?></b></h3>
                                <span><?php echo $user['email']; ?></span>
                            </div>
                            <div class="card-footer-right">
                                <span><b>Edit Profile</b></span>
                                <a href="profile.php"><button class="button-class">Profile <i class="fa-solid fa-arrow-right-long"></i></button></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="right-section">
                    <div class="total-section">
                        <div>
                            <span>Total Appointments <b><?php echo $totalAppointments; ?></b></span>
                            <span><i class="fa-solid fa-user-doctor"></i></span>
                        </div>
                        <div>
                            <span>Total Medical Certificates <b><?php echo $totalCertificates; ?></b></span>
                            <span><i class="fa-solid fa-calendar-check"></i></span>
                        </div>
                    </div>
                    <div class="total-section">
                        <div>
                            <span>Total Prescriptions <b><?php echo $totalPrescription; ?></b></span>
                            <span><i class="fa-solid fa-user-doctor"></i></span>
                        </div>
                        <div>
                            <span>Total Referrals <b><?php echo $totalReferrals; ?></b></span>
                            <span><i class="fa-solid fa-calendar-check"></i></span>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="footer">
                <hr>
                <div>
                    <small>All Rights Reserved Â© 2024 <a href="">DoctorHelp</a></small>
                </div>
            </footer>
        </div>
    </div>
    <!-- <script src="assets/script.js"></script> -->
    <script>document.addEventListener("DOMContentLoaded", function () {
        var sidebar = document.getElementById("sidebar");
        var content = document.querySelector(".second-section");
        var sidebarLogo = document.querySelector(".sidebar-logo");
    
        // Initial sidebar state
        if (window.innerWidth <= 1176) {
            sidebar.style.width = "50px";
            sidebarLogo.style.display = "none";
            content.classList.remove("sidebar-open");
        } else {
            sidebar.style.width = "250px";
            content.classList.add("sidebar-open");
        }
    
        // Add event listener to the sidebar toggle icon
        var sidebarToggle = document.getElementById("sidebar-toggle");
        sidebarToggle.addEventListener("click", function () {
            toggleSidebar();
        });
    
        // Add event listener to the dropdown toggle in navbar
        var dropdownToggle = document.querySelector(".navbar-profile");
        dropdownToggle.addEventListener("click", function (event) {
            event.stopPropagation();
            toggleDropdown();
        });
    
        // Close the dropdown if the user clicks outside of it
        window.addEventListener("click", function (event) {
            var dropdown = document.getElementById("dropdownContent");
            if (!event.target.closest(".navbar-title") && dropdown.classList.contains("show")) {
                dropdown.classList.remove("show");
            }
        });
    
        // Highlight active sidebar link based on the current page
        highlightActiveLink();
    
        // Handle screen resize
        window.addEventListener("resize", function () {
            if (window.innerWidth <= 1176 && sidebar.style.width === "250px") {
                sidebar.style.width = "50px";
                content.classList.remove("sidebar-open");
            } else if (window.innerWidth > 1176 && sidebar.style.width === "50px") {
                sidebar.style.width = "250px";
                content.classList.add("sidebar-open");
            }
        });
    });
    
    function toggleSidebar() {
        var sidebar = document.getElementById("sidebar");
        var content = document.querySelector(".second-section");
        var sidebarLogo = document.querySelector(".sidebar-logo");
    
        if (sidebar.style.width === "250px" || sidebar.style.width === "") {
            sidebar.style.width = "50px";
            content.style.marginLeft = "50px";
            sidebarLogo.style.display = "none";
            content.classList.remove("sidebar-open");
        } else {
            sidebar.style.width = "250px";
            sidebarLogo.style.display = "inline";
            content.style.marginLeft = "250px";
            content.classList.add("sidebar-open");
        }
    }
    
    function toggleDropdown() {
        var dropdown = document.getElementById("dropdownContent");
        dropdown.classList.toggle("show");
    }
    
    function highlightActiveLink() {
        var path = window.location.pathname;
        var page = path.split("/").pop();
    
        var links = document.querySelectorAll(".sidebar a");
        links.forEach(function (link) {
            link.classList.remove("active");
            if (link.getAttribute("href").indexOf(page) !== -1) {
                link.classList.add("active");
            }
        });
    }
    </script>
</body>
</html>
